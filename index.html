li.textContent = track.title + ' - ' + track.artist;
    li.onclick = () => {
      currentTrackIndex = index;
      loadTrack(index);
      audio.play();
      updatePlayPauseButton();
    };
    trackListElem.appendChild(li);
  });

  function updatePlayPauseButton() {
    if (audio.paused) {
      playPauseBtn.textContent = '▶️';
    } else {
      playPauseBtn.textContent = '⏸️';
    }
  }

  document.getElementById('playPauseBtn').onclick = () => {
    if (audio.paused) {
      audio.play();
    } else {
      audio.pause();
    }
    updatePlayPauseButton();
  };

  prevBtn.onclick = () => {
    currentTrackIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length;
    loadTrack(currentTrackIndex);
    audio.play();
    updatePlayPauseButton();
  };

  nextBtn.onclick = () => {
    currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
    loadTrack(currentTrackIndex);
    audio.play();
    updatePlayPauseButton();
  };

  // Обновление прогресса
  audio.ontimeupdate = () => {
    const progressPercent = (audio.currentTime / audio.duration) * 100;
    progressBar.style.width = progressPercent + '%';
  };

  // Перемотка по клику
  document.getElementById('progress-container').onclick = (e) => {
    const rect = e.currentTarget.querySelector('.progress').getBoundingClientRect();
    const clickX = e.clientX - rect.left;
    const width = rect.width;
    if (audio.duration) {
      const seekTime = (clickX / width) * audio.duration;
      audio.currentTime = seekTime;
    }
  };

  // Громкость
  volumeRange.oninput = () => {
    audio.volume = volumeRange.value;
  };

  // Автозамена трека
  audio.onended = () => {
    currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
    loadTrack(currentTrackIndex);
    audio.play();
  };

  // Изначально загружаем первый трек
  loadTrack(currentTrackIndex);
  updatePlayPauseButton();
</script>
</body>
</html>
